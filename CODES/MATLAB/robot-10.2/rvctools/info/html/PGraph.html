<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="http://www.petercorke.com/RVC/common/toolboxhelp.css">
    <title>M-File Help: PGraph</title>
  </head>
  <body>
  <table border="0" cellspacing="0" width="100%">
    <tr class="subheader">
      <td class="headertitle">M-File Help: PGraph</td>
      <td class="subheader-left"><a href="matlab:open PGraph">View code for PGraph</a></td>
    </tr>
  </table>
<h1>PGraph</h1><p><span class="helptopic">Graph class</span></p><table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g = PGraph()</td> <td>create a 2D, planar embedded, directed graph</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g = PGraph(n)</td> <td>create an n-d, embedded, directed graph</td></tr>
</table>
<p>
Provides support for graphs that:

</p>
<ul>
  <li>are directed</li>
  <li>are embedded in a coordinate system</li>
  <li>have symmetric cost edges (A to B is same cost as B to A)</li>
  <li>have no loops (edges from A to A)</li>
  <li>have vertices that are represented by integers VID</li>
  <li>have edges that are represented by integers EID</li>
</ul>
<h2>Methods</h2>
<h2>Constructing the graph</h2>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g.add_node(coord)</td> <td>add vertex, return vid</td></tr>
  <tr><td style="white-space: nowrap;" class="col1">g.add_edge(v1,  v2)</td> <td>add edge from v1 to v2, return eid</td></tr>
  <tr><td style="white-space: nowrap;" class="col1">g.setcost(e,  c)</td> <td>set cost for edge e</td></tr>
  <tr><td style="white-space: nowrap;" class="col1">g.setdata(v,  u)</td> <td>set user data for vertex v</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.data(v)</td> <td>get user data for vertex v</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.clear()</td> <td>remove all vertices and edges from the graph</td></tr>
</table>
<h2>Information from graph</h2>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g.edges(v)</td> <td>list of edges for vertex v</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.cost(e)</td> <td>cost of edge e</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.neighbours(v)</td> <td>neighbours of vertex v</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.component(v)</td> <td>component id for vertex v</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.connectivity()</td> <td>number of edges for all vertices</td></tr>
</table>
<h2>Display</h2>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g.plot()</td> <td>set goal vertex for path planning</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.highlight_node(v)</td> <td>highlight vertex v</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.highlight_edge(e)</td> <td>highlight edge e</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.highlight_component(c)</td> <td>highlight all nodes in component c</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.highlight_path(p)</td> <td>highlight nodes and edge along path p</td></tr>
</table>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g.pick(coord)</td> <td>vertex closest to coord</td></tr>
</table>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g.char()</td> <td>convert graph to string</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.display()</td> <td>display summary of graph</td></tr>
</table>
<h2>Matrix representations</h2>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g.adjacency()</td> <td>adjacency matrix</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.incidence()</td> <td>incidence matrix</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.degree()</td> <td>degree matrix</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.laplacian()</td> <td>Laplacian  matrix</td></tr>
</table>
<h2>Planning paths through the graph</h2>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1">g.Astar(s,  g)</td> <td>shortest path from s to g</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.goal(v)</td> <td>set goal vertex, and plan paths</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.path(v)</td> <td>list of vertices from v to goal</td></tr>
</table>
<h2>Graph and world points</h2>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g.coord(v)</td> <td>coordinate of vertex v</td></tr>
  <tr><td style="white-space: nowrap;" class="col1">g.distance(v1,  v2)</td> <td>distance between v1 and v2</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.distances(coord)</td> <td>return sorted distances from coord to all vertices</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.closest(coord)</td> <td>vertex closest to coord</td></tr>
</table>
<h2>Object properties (read only)</h2>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1"> g.n</td> <td>number of vertices</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.ne</td> <td>number of edges</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> g.nc</td> <td>number of components</td></tr>
</table>
<h2>Examples</h2>
<pre style="width: 90%%;" class="examples">
g&nbsp;=&nbsp;PGraph();
g.add_node([1&nbsp;2]');&nbsp;&nbsp;%&nbsp;add&nbsp;node&nbsp;1
g.add_node([3&nbsp;4]');&nbsp;&nbsp;%&nbsp;add&nbsp;node&nbsp;1
g.add_node([1&nbsp;3]');&nbsp;&nbsp;%&nbsp;add&nbsp;node&nbsp;1
g.add_edge(1,&nbsp;2);&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;add&nbsp;edge&nbsp;1-2
g.add_edge(2,&nbsp;3);&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;add&nbsp;edge&nbsp;2-3
g.add_edge(1,&nbsp;3);&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;add&nbsp;edge&nbsp;1-3
g.plot()
</pre>
<h2>Notes</h2>
<ul>
  <li>Support for edge direction is rudimentary.</li>
</ul>
<hr>
<a name="PGraph"><h1>PGraph.PGraph</h1></a>
<p><span class="helptopic">Graph class constructor</span></p><p>
<strong>g</strong>=<span style="color:red">PGraph</span>(<strong>d</strong>, <strong>options</strong>) is a graph object embedded in <strong>d</strong> dimensions.

</p>
<h2>Options</h2>
<table class="list">
  <tr><td style="white-space: nowrap;" class="col1">'distance', M</td> <td>Use the distance metric M for path planning which is either
'Euclidean' (default) or 'SE2'.</td></tr>
  <tr><td style="white-space: nowrap;" class="col1"> 'verbose'</td> <td>Specify verbose operation</td></tr>
</table>
<h2>Notes</h2>
<ul>
  <li>Number of dimensions is not limited to 2 or 3.</li>
  <li>The distance metric 'SE2' is the sum of the squares of the difference
in position and angle modulo 2pi.</li>
  <li>To use a different distance metric create a subclass of PGraph and
override the method distance_metric().</li>
</ul>
<hr>
<a name="add_edge"><h1>PGraph.add_edge</h1></a>
<p><span class="helptopic">Add an edge</span></p><p>
<strong>E</strong> = G.<span style="color:red">add_edge</span>(<strong>v1</strong>, <strong>v2</strong>) adds a directed edge from vertex id <strong>v1</strong> to vertex id <strong>v2</strong>, and
returns the edge id <strong>E</strong>.  The edge cost is the distance between the vertices.

</p>
<p>
<strong>E</strong> = G.<span style="color:red">add_edge</span>(<strong>v1</strong>, <strong>v2</strong>, <strong>C</strong>) as above but the edge cost is <strong>C</strong>.

</p>
<h2>Notes</h2>
<ul>
  <li>If V2 is a vector add edges from V1 to all elements of V2</li>
  <li>Distance is computed according to the metric specified in the
constructor.</li>
</ul>
<h2>See also</h2>
<p>
<a href="PGraph.add_node.html">PGraph.add_node</a>, <a href="PGraph.edgedir.html">PGraph.edgedir</a></p>
<hr>
<a name="add_node"><h1>PGraph.add_node</h1></a>
<p><span class="helptopic">Add a node</span></p><p>
<strong>v</strong> = G.<span style="color:red">add_node</span>(<strong>x</strong>) adds a node/vertex with coordinate <strong>x</strong> (Dx1) and
returns the integer node id <strong>v</strong>.

</p>
<p>
<strong>v</strong> = G.<span style="color:red">add_node</span>(<strong>x</strong>, <strong>vfrom</strong>) as above but connected by a directed edge from vertex <strong>vfrom</strong> with cost equal to the distance between the vertices.

</p>
<p>
<strong>v</strong> = G.<span style="color:red">add_node</span>(<strong>x</strong>, <strong>v2</strong>, <strong>C</strong>) as above but the added edge has cost <strong>C</strong>.

</p>
<h2>Notes</h2>
<ul>
  <li>Distance is computed according to the metric specified in the
constructor.</li>
</ul>
<h2>See also</h2>
<p>
<a href="PGraph.add_edge.html">PGraph.add_edge</a>, <a href="PGraph.data.html">PGraph.data</a>, <a href="PGraph.getdata.html">PGraph.getdata</a></p>
<hr>
<a name="adjacency"><h1>PGraph.adjacency</h1></a>
<p><span class="helptopic">Adjacency matrix of graph</span></p><p>
<strong>a</strong> = G.<span style="color:red">adjacency</span>() is a matrix (NxN) where element <strong>a</strong>(i,j) is the cost
of moving from vertex i to vertex j.

</p>
<h2>Notes</h2>
<ul>
  <li>Matrix is symmetric.</li>
  <li>Eigenvalues of A are real and are known as the spectrum of the graph.</li>
  <li>The element A(I,J) can be considered the number of walks of one
edge from vertex I to vertex J (either zero or one).  The element (I,J)
of A^N are the number of walks of length N from vertex I to vertex J.</li>
</ul>
<h2>See also</h2>
<p>
<a href="PGraph.degree.html">PGraph.degree</a>, <a href="PGraph.incidence.html">PGraph.incidence</a>, <a href="PGraph.laplacian.html">PGraph.laplacian</a></p>
<hr>
<a name="Astar"><h1>PGraph.Astar</h1></a>
<p><span class="helptopic">path finding</span></p><p>
<strong>path</strong> = G.<span style="color:red">Astar</span>(<strong>v1</strong>, <strong>v2</strong>) is the lowest cost path from vertex <strong>v1</strong> to
vertex <strong>v2</strong>.  <strong>path</strong> is a list of vertices starting with <strong>v1</strong> and ending
<strong>v2</strong>.

</p>
<p>
[<strong>path</strong>,<strong>C</strong>] = G.<span style="color:red">Astar</span>(<strong>v1</strong>, <strong>v2</strong>) as above but also returns the total cost
of traversing <strong>path</strong>.

</p>
<h2>Notes</h2>
<ul>
  <li>Uses the efficient A* search algorithm.</li>
  <li>The heuristic is the distance function selected in the constructor, it
must be  admissible, meaning that it never overestimates the actual
cost to get to the nearest goal node.</li>
</ul>
<h2>References</h2>
<ul>
  <li>Correction to "A Formal Basis for the Heuristic Determination of Minimum Cost Paths".
Hart, P. E.; Nilsson, N. J.; Raphael, B.
SIGART Newsletter 37: 28-29, 1972.</li>
</ul>
<h2>See also</h2>
<p>
<a href="PGraph.goal.html">PGraph.goal</a>, <a href="PGraph.path.html">PGraph.path</a></p>
<hr>
<a name="char"><h1>PGraph.char</h1></a>
<p><span class="helptopic">Convert graph to string</span></p><p>
<strong>s</strong> = G.<span style="color:red">char</span>() is a compact human readable representation of the
state of the graph including the number of vertices, edges and components.

</p>
<hr>
<a name="clear"><h1>PGraph.clear</h1></a>
<p><span class="helptopic">Clear the graph</span></p><p>
G.<span style="color:red">clear</span>() removes all vertices, edges and components.

</p>
<hr>
<a name="closest"><h1>PGraph.closest</h1></a>
<p><span class="helptopic">Find closest vertex</span></p><p>
<strong>v</strong> = G.<span style="color:red">closest</span>(<strong>x</strong>) is the vertex geometrically <span style="color:red">closest</span> to coordinate <strong>x</strong>.

</p>
<p>
[<strong>v</strong>,<strong>d</strong>] = G.<span style="color:red">closest</span>(<strong>x</strong>) as above but also returns the distance <strong>d</strong>.

</p>
<h2>See also</h2>
<p>
<a href="PGraph.distances.html">PGraph.distances</a></p>
<hr>
<a name="component"><h1>PGraph.component</h1></a>
<p><span class="helptopic">Graph component</span></p><p>
<strong>C</strong> = G.<span style="color:red">component</span>(<strong>v</strong>) is the id of the graph <span style="color:red">component</span> that contains vertex
<strong>v</strong>.

</p>
<hr>
<a name="componentnodes"><h1>PGraph.componentnodes</h1></a>
<p><span class="helptopic">Graph component</span></p><p>
<strong>C</strong> = G.<span style="color:red">component</span>(<strong>v</strong>) is the id of the graph <span style="color:red">component</span> that contains vertex
<strong>v</strong>.

</p>
<hr>
<a name="connectivity"><h1>PGraph.connectivity</h1></a>
<p><span class="helptopic">Node connectivity</span></p><p>
<strong>C</strong> = G.<span style="color:red">connectivity</span>() is a vector (Nx1) with the number of edges per
vertex.

</p>
<p>
The average vertex <span style="color:red">connectivity</span> is

</p>
<pre style="width: 90%%;" class="examples">
mean(g.connectivity())
</pre>
<p>
and the minimum vertex <span style="color:red">connectivity</span> is

</p>
<pre style="width: 90%%;" class="examples">
min(g.connectivity())
</pre>
<hr>
<a name="connectivity_in"><h1>PGraph.connectivity_in</h1></a>
<p><span class="helptopic">Graph connectivity</span></p><p>
<strong>C</strong> = G.<span style="color:red">connectivity</span>() is a vector (Nx1) with the number of edges per
vertex.

</p>
<p>
The average vertex <span style="color:red">connectivity</span> is

</p>
<pre style="width: 90%%;" class="examples">
mean(g.connectivity())
</pre>
<p>
and the minimum vertex <span style="color:red">connectivity</span> is

</p>
<pre style="width: 90%%;" class="examples">
min(g.connectivity())
</pre>
<hr>
<a name="connectivity_out"><h1>PGraph.connectivity_out</h1></a>
<p><span class="helptopic">Graph connectivity</span></p><p>
<strong>C</strong> = G.<span style="color:red">connectivity</span>() is a vector (Nx1) with the number of edges per
vertex.

</p>
<p>
The average vertex <span style="color:red">connectivity</span> is

</p>
<pre style="width: 90%%;" class="examples">
mean(g.connectivity())
</pre>
<p>
and the minimum vertex <span style="color:red">connectivity</span> is

</p>
<pre style="width: 90%%;" class="examples">
min(g.connectivity())
</pre>
<hr>
<a name="coord"><h1>PGraph.coord</h1></a>
<p><span class="helptopic">Coordinate of node</span></p><p>
<strong>x</strong> = G.<span style="color:red">coord</span>(<strong>v</strong>) is the coordinate vector (Dx1) of vertex id <strong>v</strong>.

</p>
<hr>
<a name="cost"><h1>PGraph.cost</h1></a>
<p><span class="helptopic">Cost of edge</span></p><p>
<strong>C</strong> = G.<span style="color:red">cost</span>(<strong>E</strong>) is the <span style="color:red">cost</span> of edge id <strong>E</strong>.

</p>
<hr>
<a name="degree"><h1>PGraph.degree</h1></a>
<p><span class="helptopic">Degree matrix of graph</span></p><p>
<strong>d</strong> = G.<span style="color:red">degree</span>() is a diagonal matrix (NxN) where element <strong>d</strong>(i,i) is the number
of edges connected to vertex id i.

</p>
<h2>See also</h2>
<p>
<a href="PGraph.adjacency.html">PGraph.adjacency</a>, <a href="PGraph.incidence.html">PGraph.incidence</a>, <a href="PGraph.laplacian.html">PGraph.laplacian</a></p>
<hr>
<a name="display"><h1>PGraph.display</h1></a>
<p><span class="helptopic">Display graph</span></p><p>
G.<span style="color:red">display</span>() displays a compact human readable representation of the
state of the graph including the number of vertices, edges and components.

</p>
<h2>See also</h2>
<p>
<a href="PGraph.char.html">PGraph.char</a></p>
<hr>
<a name="distance"><h1>PGraph.distance</h1></a>
<p><span class="helptopic">Distance between vertices</span></p><p>
<strong>d</strong> = G.<span style="color:red">distance</span>(<strong>v1</strong>, <strong>v2</strong>) is the geometric <span style="color:red">distance</span> between
the vertices <strong>v1</strong> and <strong>v2</strong>.

</p>
<h2>See also</h2>
<p>
<a href="PGraph.distances.html">PGraph.distances</a></p>
<hr>
<a name="distances"><h1>PGraph.distances</h1></a>
<p><span class="helptopic">Distances from point to vertices</span></p><p>
<strong>d</strong> = G.<span style="color:red">distances</span>(<strong>x</strong>) is a vector (1xN) of geometric distance from the point
<strong>x</strong> (Dx1) to every other vertex sorted into increasing order.

</p>
<p>
[<stron                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          